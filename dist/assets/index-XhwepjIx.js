(function(){const y=document.createElement("link").relList;if(y&&y.supports&&y.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function d(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(r){if(r.ep)return;r.ep=!0;const a=d(r);fetch(r.href,a)}})();/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const L="/tapsan/";document.addEventListener("DOMContentLoaded",()=>{const i=document.getElementById("background-music"),y=document.getElementById("page-16"),d=document.getElementById("volume-slider"),l=document.getElementById("volume-icon");let r=!1,a=!1,u=.4;if(i&&i.src&&i.src.startsWith(window.location.origin+"/")){const e=i.src.substring(window.location.origin.length),n=e.startsWith("/")?e.substring(1):e;i.src=L+n}const p=e=>{l&&(e===0?l.textContent="ðŸ”‡":e<.5?l.textContent="ðŸ”‰":l.textContent="ðŸ”Š")};i&&(i.volume=u,d&&(d.value=String(i.volume*100),p(i.volume))),d&&i&&l&&(d.addEventListener("input",e=>{const n=e.target.value,t=parseInt(n,10)/100;i.volume=t,t>0&&(u=t),p(t)}),l.addEventListener("click",()=>{if(i.volume>0)i.volume=0,d.value="0",p(0);else{const e=u>0?u:.4;i.volume=e,d.value=String(e*100),p(e)}}));const S=()=>{if(a||!i||(a=!0,document.querySelectorAll(".sound-visualizer .bar").length===0))return;const n=new(window.AudioContext||window.webkitAudioContext),t=n.createMediaElementSource(i),s=n.createAnalyser();s.fftSize=64,t.connect(s),s.connect(n.destination);const f=new Uint8Array(s.frequencyBinCount),A=()=>{requestAnimationFrame(A),s.getByteFrequencyData(f),document.querySelectorAll(".sound-visualizer .bar").forEach((M,B)=>{const P=B%s.frequencyBinCount,q=f[P]/255*40;M.style.height=`${q}px`})};A()},c=document.querySelectorAll(".page"),b=c.length,g=e=>{if(!e)return;e.querySelectorAll("img[data-src]").forEach(t=>{const s=t.getAttribute("data-src");if(s){const f=s.startsWith("/")?s.substring(1):s;t.src=L+f,t.removeAttribute("data-src"),t.onload=()=>{t.classList.add("loaded")}}})};c[0]&&g(c[0]),c[1]&&g(c[1]);const w=new Array(b).fill(!1),z=()=>{let e=b,n=1;c.forEach((t,s)=>{w[s]?(t.style.zIndex=String(n),n++):(t.style.zIndex=String(e),e--)})};z(),c.forEach((e,n)=>{e.addEventListener("click",()=>{!r&&i&&(i.play().catch(f=>console.error("Audio play failed:",f)),r=!0,S());const t=c[n+1],s=c[n+2];t&&g(t),s&&g(s),e.classList.toggle("flipped"),w[n]=!w[n],z(),e===y&&i&&(e.classList.contains("flipped")?i.pause():i.play().catch(f=>console.error("Audio play failed:",f)))})});const h=document.getElementById("sparkle-canvas"),o=h.getContext("2d");h.width=window.innerWidth,h.height=window.innerHeight;let m=[];const v={x:-100,y:-100};window.addEventListener("mousemove",e=>{v.x=e.x,v.y=e.y;for(let n=0;n<2;n++)m.push(new E)}),window.addEventListener("resize",()=>{h.width=window.innerWidth,h.height=window.innerHeight});class E{constructor(){this.x=v.x,this.y=v.y,this.size=Math.random()*5+2,this.speedX=Math.random()*3-1.5,this.speedY=Math.random()*3-1.5,this.color=`hsl(${Math.random()*20+330}, 100%, 75%)`,this.rotation=(Math.random()-.5)*.5,this.rotationSpeed=(Math.random()-.5)*.02}update(){this.x+=this.speedX,this.y+=this.speedY,this.rotation+=this.rotationSpeed,this.size>.2&&(this.size-=.1)}draw(){if(o){o.save(),o.translate(this.x,this.y),o.rotate(this.rotation);const n=this.size/60;o.scale(n,n),o.translate(-75,-75),o.fillStyle=this.color,o.beginPath(),o.moveTo(75,40),o.bezierCurveTo(75,37,70,25,50,25),o.bezierCurveTo(20,25,20,62.5,20,62.5),o.bezierCurveTo(20,80,40,102,75,120),o.bezierCurveTo(110,102,130,80,130,62.5),o.bezierCurveTo(130,62.5,130,25,100,25),o.bezierCurveTo(85,25,75,37,75,40),o.fill(),o.restore()}}}function I(){for(let e=0;e<m.length;e++)m[e].update(),m[e].draw(),m[e].size<=.2&&(m.splice(e,1),e--)}const x=document.getElementById("falling-leaves-container");if(x)for(let n=0;n<50;n++){const t=document.createElement("div");t.classList.add("leaf"),t.style.left=`${Math.random()*100}vw`,t.style.animationDuration=`${Math.random()*8+7}s`,t.style.animationDelay=`-${Math.random()*10}s`,t.style.opacity=String(Math.random()*.6+.4);const s=Math.random()*10+5;t.style.width=`${s}px`,t.style.height=`${s}px`,t.style.backgroundColor=`hsl(330, 100%, ${Math.random()*15+75}%)`,x.appendChild(t)}function C(){o&&o.clearRect(0,0,h.width,h.height),I(),requestAnimationFrame(C)}C()});
