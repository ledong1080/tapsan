(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function d(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(s){if(s.ep)return;s.ep=!0;const a=d(s);fetch(s.href,a)}})();/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const $="/tapsan/";document.addEventListener("DOMContentLoaded",()=>{const i=document.getElementById("background-music"),f=document.getElementById("page-17"),d=document.getElementById("volume-slider"),l=document.getElementById("volume-icon");let s=!1,a=!1,u=.5;const p=t=>{t===0?l.textContent="ðŸ”‡":t<.5?l.textContent="ðŸ”‰":l.textContent="ðŸ”Š"};i&&(i.volume=u,d.value=String(i.volume*100),p(i.volume)),d==null||d.addEventListener("input",t=>{const e=Number(t.target.value)/100;i.volume=e,e>0&&(u=e),p(e)}),l==null||l.addEventListener("click",()=>{i.volume>0?(i.volume=0,d.value="0",p(0)):(i.volume=u||.5,d.value=String(i.volume*100),p(i.volume))});const A=()=>{if(a||!i||(a=!0,document.querySelectorAll(".sound-visualizer .bar").length===0))return;const e=new(window.AudioContext||window.webkitAudioContext),o=e.createMediaElementSource(i),r=e.createAnalyser();r.fftSize=64,o.connect(r),r.connect(e.destination);const m=new Uint8Array(r.frequencyBinCount),L=()=>{requestAnimationFrame(L),r.getByteFrequencyData(m),document.querySelectorAll("#sound-bars .bar").forEach((B,I)=>{const q=I%m.length,P=10+m[q]/255*50;B.style.height=`${P}px`})};L()},g=document.getElementById("bookWrapper"),c=document.querySelectorAll(".page"),w=c.length,y=t=>{if(!t)return;t.querySelectorAll("img[data-src]").forEach(o=>{const r=o.getAttribute("data-src");if(!r)return;const m=r.startsWith("/")?r.substring(1):r;o.src=$+m,o.onload=()=>o.classList.add("loaded"),o.removeAttribute("data-src")})};c[0]&&y(c[0]),c[1]&&y(c[1]);const v=new Array(w).fill(!1),M=()=>{if(!g)return;const t=v.filter(Boolean).length;t===0?g.className="book-wrapper align-single-right":t===w?g.className="book-wrapper align-single-left":g.className="book-wrapper"},E=()=>{let t=w,e=1;c.forEach((o,r)=>{o.style.zIndex=v[r]?String(e++):String(t--)}),M()};E(),c.forEach((t,e)=>{t.addEventListener("click",()=>{s||(i.play().catch(console.warn),s=!0,A()),y(c[e+1]),y(c[e+2]),t.classList.toggle("flipped"),v[e]=!v[e],E(),t===f&&(t.classList.contains("flipped")?i.pause():i.play().catch(console.warn))})});const h=document.getElementById("sparkle-canvas"),n=h.getContext("2d");h.width=innerWidth,h.height=innerHeight;let z=[];const b={x:-100,y:-100};window.addEventListener("mousemove",t=>{b.x=t.x,b.y=t.y;for(let e=0;e<2;e++)z.push(new S)}),window.addEventListener("resize",()=>{h.width=innerWidth,h.height=innerHeight});class S{constructor(){this.x=b.x,this.y=b.y,this.size=Math.random()*5+2,this.speedX=Math.random()*3-1.5,this.speedY=Math.random()*3-1.5,this.rotation=(Math.random()-.5)*.5,this.rotationSpeed=(Math.random()-.5)*.02,this.color=`hsl(${330+Math.random()*20}, 100%, 75%)`}update(){this.x+=this.speedX,this.y+=this.speedY,this.rotation+=this.rotationSpeed,this.size>.2&&(this.size-=.1)}draw(){if(!n)return;n.save(),n.translate(this.x,this.y),n.rotate(this.rotation);const e=this.size/60;n.scale(e,e),n.translate(-75,-75),n.fillStyle=this.color,n.beginPath(),n.moveTo(75,40),n.bezierCurveTo(75,37,70,25,50,25),n.bezierCurveTo(20,25,20,62.5,20,62.5),n.bezierCurveTo(20,80,40,102,75,120),n.bezierCurveTo(110,102,130,80,130,62.5),n.bezierCurveTo(130,62.5,130,25,100,25),n.bezierCurveTo(85,25,75,37,75,40),n.fill(),n.restore()}}const C=()=>{n&&n.clearRect(0,0,h.width,h.height),z.forEach((t,e)=>{t.update(),t.draw(),t.size<.2&&(z.splice(e,1),e--)}),requestAnimationFrame(C)};C();const x=document.getElementById("falling-leaves-container");if(x)for(let e=0;e<50;e++){const o=document.createElement("div");o.classList.add("leaf"),o.style.left=`${Math.random()*100}vw`,o.style.animationDuration=`${Math.random()*8+7}s`,o.style.animationDelay=`-${Math.random()*10}s`,o.style.opacity=String(Math.random()*.6+.4);const r=Math.random()*10+5;o.style.width=`${r}px`,o.style.height=`${r}px`,o.style.backgroundColor=`hsl(330, 100%, ${75+Math.random()*15}%)`,x.appendChild(o)}});
