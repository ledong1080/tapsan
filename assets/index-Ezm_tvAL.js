(function(){const y=document.createElement("link").relList;if(y&&y.supports&&y.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function d(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(s){if(s.ep)return;s.ep=!0;const a=d(s);fetch(s.href,a)}})();/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const q="/tapsan/";document.addEventListener("DOMContentLoaded",()=>{const r=document.getElementById("background-music"),y=document.getElementById("page-17"),d=document.getElementById("volume-slider"),l=document.getElementById("volume-icon");let s=!1,a=!1,u=.5;const p=e=>{l&&(e===0?l.textContent="ðŸ”‡":e<.5?l.textContent="ðŸ”‰":l.textContent="ðŸ”Š")};r&&(r.volume=u,d&&(d.value=String(r.volume*100),p(r.volume))),d&&r&&l&&(d.addEventListener("input",e=>{const n=e.target.value,t=parseInt(n,10)/100;r.volume=t,t>0&&(u=t),p(t)}),l.addEventListener("click",()=>{if(r.volume>0)r.volume=0,d.value="0",p(0);else{const e=u>0?u:.5;r.volume=e,d.value=String(e*100),p(e)}}));const S=()=>{if(a||!r||(a=!0,document.querySelectorAll(".sound-visualizer .bar").length===0))return;const n=new(window.AudioContext||window.webkitAudioContext),t=n.createMediaElementSource(r),i=n.createAnalyser();i.fftSize=64,t.connect(i),i.connect(n.destination);const f=new Uint8Array(i.frequencyBinCount),L=()=>{requestAnimationFrame(L),i.getByteFrequencyData(f),document.querySelectorAll(".sound-visualizer .bar").forEach((I,M)=>{const B=M%i.frequencyBinCount,P=f[B]/255*60;I.style.height=`${P}px`})};L()},c=document.querySelectorAll(".page"),z=c.length,g=e=>{if(!e)return;e.querySelectorAll("img[data-src]").forEach(t=>{const i=t.getAttribute("data-src");if(i){const f=i.startsWith("/")?i.substring(1):i;t.src=q+f,t.removeAttribute("data-src"),t.onload=()=>{t.classList.add("loaded")}}})};c[0]&&g(c[0]),c[1]&&g(c[1]);const w=new Array(z).fill(!1),b=()=>{let e=z,n=1;c.forEach((t,i)=>{w[i]?(t.style.zIndex=String(n),n++):(t.style.zIndex=String(e),e--)})};b(),c.forEach((e,n)=>{e.addEventListener("click",()=>{!s&&r&&(r.play().catch(f=>console.error("Audio play failed:",f)),s=!0,S());const t=c[n+1],i=c[n+2];t&&g(t),i&&g(i),e.classList.toggle("flipped"),w[n]=!w[n],b(),e===y&&r&&(e.classList.contains("flipped")?r.pause():r.play().catch(f=>console.error("Audio play failed:",f)))})});const h=document.getElementById("sparkle-canvas"),o=h.getContext("2d");h.width=window.innerWidth,h.height=window.innerHeight;let m=[];const v={x:-100,y:-100};window.addEventListener("mousemove",e=>{v.x=e.x,v.y=e.y;for(let n=0;n<2;n++)m.push(new A)}),window.addEventListener("resize",()=>{h.width=window.innerWidth,h.height=window.innerHeight});class A{constructor(){this.x=v.x,this.y=v.y,this.size=Math.random()*5+2,this.speedX=Math.random()*3-1.5,this.speedY=Math.random()*3-1.5,this.color=`hsl(${Math.random()*20+330}, 100%, 75%)`,this.rotation=(Math.random()-.5)*.5,this.rotationSpeed=(Math.random()-.5)*.02}update(){this.x+=this.speedX,this.y+=this.speedY,this.rotation+=this.rotationSpeed,this.size>.2&&(this.size-=.1)}draw(){if(o){o.save(),o.translate(this.x,this.y),o.rotate(this.rotation);const n=this.size/60;o.scale(n,n),o.translate(-75,-75),o.fillStyle=this.color,o.beginPath(),o.moveTo(75,40),o.bezierCurveTo(75,37,70,25,50,25),o.bezierCurveTo(20,25,20,62.5,20,62.5),o.bezierCurveTo(20,80,40,102,75,120),o.bezierCurveTo(110,102,130,80,130,62.5),o.bezierCurveTo(130,62.5,130,25,100,25),o.bezierCurveTo(85,25,75,37,75,40),o.fill(),o.restore()}}}function E(){for(let e=0;e<m.length;e++)m[e].update(),m[e].draw(),m[e].size<=.2&&(m.splice(e,1),e--)}const x=document.getElementById("falling-leaves-container");if(x)for(let n=0;n<50;n++){const t=document.createElement("div");t.classList.add("leaf"),t.style.left=`${Math.random()*100}vw`,t.style.animationDuration=`${Math.random()*8+7}s`,t.style.animationDelay=`-${Math.random()*10}s`,t.style.opacity=String(Math.random()*.6+.4);const i=Math.random()*10+5;t.style.width=`${i}px`,t.style.height=`${i}px`,t.style.backgroundColor=`hsl(330, 100%, ${Math.random()*15+75}%)`,x.appendChild(t)}function C(){o&&o.clearRect(0,0,h.width,h.height),E(),requestAnimationFrame(C)}C()});
