(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function d(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(s){if(s.ep)return;s.ep=!0;const a=d(s);fetch(s.href,a)}})();/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const $="/tapsan/";document.addEventListener("DOMContentLoaded",()=>{const i=document.getElementById("background-music"),f=document.getElementById("page-17"),d=document.getElementById("volume-slider"),l=document.getElementById("volume-icon");let s=!1,a=!1,u=.5;const p=e=>{e===0?l.textContent="ðŸ”‡":e<.5?l.textContent="ðŸ”‰":l.textContent="ðŸ”Š"};i&&(i.volume=u,d.value=String(i.volume*100),p(i.volume)),d==null||d.addEventListener("input",e=>{const t=Number(e.target.value)/100;i.volume=t,t>0&&(u=t),p(t)}),l==null||l.addEventListener("click",()=>{i.volume>0?(i.volume=0,d.value="0",p(0)):(i.volume=u||.5,d.value=String(i.volume*100),p(i.volume))});const M=()=>{const e=document.querySelectorAll("#sound-right-corner .bar");if(a||!i||e.length===0)return;a=!0;const t=new(window.AudioContext||window.webkitAudioContext),o=t.createMediaElementSource(i),r=t.createAnalyser();r.fftSize=64,o.connect(r),r.connect(t.destination);const m=new Uint8Array(r.frequencyBinCount),L=()=>{requestAnimationFrame(L),r.getByteFrequencyData(m),e.forEach((B,I)=>{const q=I%m.length,P=10+m[q]/255*50;B.style.height=`${P}px`})};L()},g=document.getElementById("bookWrapper"),c=document.querySelectorAll(".page"),b=c.length,y=e=>{if(!e)return;e.querySelectorAll("img[data-src]").forEach(o=>{const r=o.getAttribute("data-src");if(!r)return;const m=r.startsWith("/")?r.substring(1):r;o.src=$+m,o.onload=()=>o.classList.add("loaded"),o.removeAttribute("data-src")})};c[0]&&y(c[0]),c[1]&&y(c[1]);const v=new Array(b).fill(!1),A=()=>{if(!g)return;const e=v.filter(Boolean).length;e===0?g.className="book-wrapper align-single-right":e===b?g.className="book-wrapper align-single-left":g.className="book-wrapper"},z=()=>{let e=b,t=1;c.forEach((o,r)=>{o.style.zIndex=v[r]?String(t++):String(e--)}),A()};z(),c.forEach((e,t)=>{e.addEventListener("click",()=>{s||(i.play().catch(console.warn),s=!0,M()),y(c[t+1]),y(c[t+2]),e.classList.toggle("flipped"),v[t]=!v[t],z(),e===f&&(e.classList.contains("flipped")?i.pause():i.play().catch(console.warn))})});const h=document.getElementById("sparkle-canvas"),n=h.getContext("2d");h.width=innerWidth,h.height=innerHeight;let E=[];const w={x:-100,y:-100};window.addEventListener("mousemove",e=>{w.x=e.x,w.y=e.y;for(let t=0;t<1;t++)E.push(new S)}),window.addEventListener("resize",()=>{h.width=innerWidth,h.height=innerHeight});class S{constructor(){this.x=w.x,this.y=w.y,this.size=Math.random()*5+2,this.speedX=Math.random()*3-1.5,this.speedY=Math.random()*3-1.5,this.rotation=(Math.random()-.5)*.5,this.rotationSpeed=(Math.random()-.5)*.02,this.color=`hsl(${330+Math.random()*20}, 100%, 75%)`}update(){this.x+=this.speedX,this.y+=this.speedY,this.rotation+=this.rotationSpeed,this.size>.2&&(this.size-=.1)}draw(){if(!n)return;n.save(),n.translate(this.x,this.y),n.rotate(this.rotation);const t=this.size/60;n.scale(t,t),n.translate(-75,-75),n.fillStyle=this.color,n.beginPath(),n.moveTo(75,40),n.bezierCurveTo(75,37,70,25,50,25),n.bezierCurveTo(20,25,20,62.5,20,62.5),n.bezierCurveTo(20,80,40,102,75,120),n.bezierCurveTo(110,102,130,80,130,62.5),n.bezierCurveTo(130,62.5,130,25,100,25),n.bezierCurveTo(85,25,75,37,75,40),n.fill(),n.restore()}}const C=()=>{n&&n.clearRect(0,0,h.width,h.height),E.forEach((e,t)=>{e.update(),e.draw(),e.size<.2&&(E.splice(t,1),t--)}),requestAnimationFrame(C)};C();const x=document.getElementById("falling-leaves-container");if(x)for(let t=0;t<25;t++){const o=document.createElement("div");o.classList.add("leaf"),o.style.left=`${Math.random()*100}vw`,o.style.animationDuration=`${Math.random()*8+7}s`,o.style.animationDelay=`-${Math.random()*10}s`,o.style.opacity=String(Math.random()*.6+.4);const r=Math.random()*10+5;o.style.width=`${r}px`,o.style.height=`${r}px`,o.style.backgroundColor=`hsl(330, 100%, ${75+Math.random()*15}%)`,x.appendChild(o)}});
