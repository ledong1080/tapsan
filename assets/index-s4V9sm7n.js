(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))m(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&m(a)}).observe(document,{childList:!0,subtree:!0});function h(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function m(n){if(n.ep)return;n.ep=!0;const s=h(n);fetch(n.href,s)}})();/** 
 * @license 
 * SPDX-License-Identifier: Apache-2.0
 */const q="/tapsan/";document.addEventListener("DOMContentLoaded",()=>{const r=document.getElementById("background-music"),c=document.getElementById("volume-slider"),h=document.getElementById("volume-icon"),m=document.getElementById("page-17");let n=!1,s=!1,a=.5;const f=e=>{e===0?h.textContent="ðŸ”‡":e<.5?h.textContent="ðŸ”‰":h.textContent="ðŸ”Š"};r&&(r.volume=a,c.value=String(a*100),f(a)),c.addEventListener("input",e=>{const t=Number(e.target.value)/100;r.volume=t,t>0&&(a=t),f(t)}),h.addEventListener("click",()=>{r.volume>0?(r.volume=0,c.value="0",f(0)):(r.volume=a,c.value=String(a*100),f(a))});const S=()=>{if(s)return;s=!0;const e=new(window.AudioContext||window.webkitAudioContext),t=e.createMediaElementSource(r),i=e.createAnalyser();i.fftSize=64,t.connect(i),i.connect(e.destination);const l=new Uint8Array(i.frequencyBinCount),z=document.querySelectorAll(".sound-visualizer .bar"),L=()=>{requestAnimationFrame(L),i.getByteFrequencyData(l),z.forEach((B,P)=>{const T=l[P%l.length]/255*60;B.style.height=`${T}px`})};L()},p=e=>{if(!e)return;e.querySelectorAll("img[data-src]").forEach(i=>{const l=i.getAttribute("data-src");if(l){const z=l.startsWith("/")?l.substring(1):l;i.src=q+z,i.removeAttribute("data-src"),i.onload=()=>i.classList.add("loaded")}})},v=document.getElementById("bookWrapper"),d=document.querySelectorAll(".page"),w=d.length,y=new Array(w).fill(!1),E=()=>{let e=w,t=1;d.forEach((i,l)=>{y[l]?i.style.zIndex=String(t++):i.style.zIndex=String(e--)})},C=()=>{const e=y.filter(Boolean).length;e===0?v.className="book-wrapper align-right":e===w?v.className="book-wrapper align-left":v.className="book-wrapper align-center"};p(d[0]),p(d[1]),E(),C(),d.forEach((e,t)=>{e.addEventListener("click",()=>{n||(r.play().catch(()=>{}),S(),n=!0),p(d[t+1]),p(d[t+2]),e.classList.toggle("flipped"),y[t]=!y[t],E(),C(),e===m&&(e.classList.contains("flipped")?r.pause():r.play().catch(()=>{}))})});const u=document.getElementById("sparkle-canvas"),o=u.getContext("2d");u.width=window.innerWidth,u.height=window.innerHeight;let b=[];const g={x:-100,y:-100};window.addEventListener("mousemove",e=>{g.x=e.x,g.y=e.y;for(let t=0;t<2;t++)b.push(new A)}),window.addEventListener("resize",()=>{u.width=window.innerWidth,u.height=window.innerHeight});class A{constructor(){this.x=g.x,this.y=g.y,this.size=Math.random()*5+2,this.speedX=Math.random()*3-1.5,this.speedY=Math.random()*3-1.5,this.color=`hsl(${Math.random()*20+330}, 100%, 75%)`,this.rotation=(Math.random()-.5)*.5,this.rotationSpeed=(Math.random()-.5)*.02}update(){this.x+=this.speedX,this.y+=this.speedY,this.rotation+=this.rotationSpeed,this.size>.2&&(this.size-=.1)}draw(){o.save(),o.translate(this.x,this.y),o.rotate(this.rotation);const t=this.size/60;o.scale(t,t),o.translate(-75,-75),o.fillStyle=this.color,o.beginPath(),o.moveTo(75,40),o.bezierCurveTo(75,37,70,25,50,25),o.bezierCurveTo(20,25,20,62.5,20,62.5),o.bezierCurveTo(20,80,40,102,75,120),o.bezierCurveTo(110,102,130,80,130,62.5),o.bezierCurveTo(130,62.5,130,25,100,25),o.bezierCurveTo(85,25,75,37,75,40),o.fill(),o.restore()}}function x(){o.clearRect(0,0,u.width,u.height),b.forEach((e,t)=>{e.update(),e.draw(),e.size<=.2&&b.splice(t,1)}),requestAnimationFrame(x)}x();const M=document.getElementById("falling-leaves-container"),I=50;for(let e=0;e<I;e++){const t=document.createElement("div");t.classList.add("leaf"),t.style.left=`${Math.random()*100}vw`,t.style.animationDuration=`${Math.random()*8+7}s`,t.style.animationDelay=`-${Math.random()*10}s`,t.style.opacity=String(Math.random()*.6+.4);const i=Math.random()*10+5;t.style.width=`${i}px`,t.style.height=`${i}px`,t.style.backgroundColor=`hsl(330, 100%, ${Math.random()*15+75}%)`,M.appendChild(t)}});
