(function(){const y=document.createElement("link").relList;if(y&&y.supports&&y.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function d(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(r){if(r.ep)return;r.ep=!0;const a=d(r);fetch(r.href,a)}})();/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const T="/tapsan/";document.addEventListener("DOMContentLoaded",()=>{const s=document.getElementById("background-music"),y=document.getElementById("page-17"),d=document.getElementById("volume-slider"),l=document.getElementById("volume-icon");let r=!1,a=!1,u=.5;const v=e=>{l&&(e===0?l.textContent="ðŸ”‡":e<.5?l.textContent="ðŸ”‰":l.textContent="ðŸ”Š")};s&&(s.volume=u,d&&(d.value=String(s.volume*100),v(s.volume))),d&&s&&l&&(d.addEventListener("input",e=>{const n=e.target.value,t=parseInt(n,10)/100;s.volume=t,t>0&&(u=t),v(t)}),l.addEventListener("click",()=>{if(s.volume>0)s.volume=0,d.value="0",v(0);else{const e=u>0?u:.5;s.volume=e,d.value=String(e*100),v(e)}}));const S=()=>{if(a||!s||(a=!0,document.querySelectorAll(".sound-visualizer .bar").length===0))return;const n=new(window.AudioContext||window.webkitAudioContext),t=n.createMediaElementSource(s),i=n.createAnalyser();i.fftSize=64,t.connect(i),i.connect(n.destination);const m=new Uint8Array(i.frequencyBinCount),p=()=>{requestAnimationFrame(p),i.getByteFrequencyData(m),document.querySelectorAll(".sound-visualizer .bar").forEach((P,q)=>{const O=q%i.frequencyBinCount,$=m[O]/255*60;P.style.height=`${$}px`})};p()},c=document.querySelectorAll(".page"),C=c.length,w=document.getElementById("bookWrapper"),b=e=>{if(!e)return;e.querySelectorAll("img[data-src]").forEach(t=>{const i=t.getAttribute("data-src");if(i){const m=i.startsWith("/")?i.substring(1):i;t.src=T+m,t.removeAttribute("data-src"),t.onload=()=>{t.classList.add("loaded")}}})};c[0]&&b(c[0]),c[1]&&b(c[1]);const g=new Array(C).fill(!1),x=e=>{w&&(e===0?w.style.transform="translateX(calc(var(--book-width) / 2))":e===C?w.style.transform="translateX(calc(var(--book-width) / -2))":w.style.transform="translateX(0)")},A=()=>{let e=C,n=1;c.forEach((t,i)=>{g[i]?(t.style.zIndex=String(n),n++):(t.style.zIndex=String(e),e--)})};A();const B=g.filter(Boolean).length;x(B),c.forEach((e,n)=>{e.addEventListener("click",()=>{!r&&s&&(s.play().catch(p=>console.error("Audio play failed:",p)),r=!0,S());const t=c[n+1],i=c[n+2];t&&b(t),i&&b(i),e.classList.toggle("flipped"),g[n]=!g[n];const m=g.filter(Boolean).length;x(m),A(),e===y&&s&&(e.classList.contains("flipped")?s.pause():s.play().catch(p=>console.error("Audio play failed:",p)))})});const f=document.getElementById("sparkle-canvas"),o=f.getContext("2d");f.width=window.innerWidth,f.height=window.innerHeight;let h=[];const z={x:-100,y:-100};window.addEventListener("mousemove",e=>{z.x=e.x,z.y=e.y;for(let n=0;n<2;n++)h.push(new I)}),window.addEventListener("resize",()=>{f.width=window.innerWidth,f.height=window.innerHeight});class I{constructor(){this.x=z.x,this.y=z.y,this.size=Math.random()*5+2,this.speedX=Math.random()*3-1.5,this.speedY=Math.random()*3-1.5,this.color=`hsl(${Math.random()*20+330}, 100%, 75%)`,this.rotation=(Math.random()-.5)*.5,this.rotationSpeed=(Math.random()-.5)*.02}update(){this.x+=this.speedX,this.y+=this.speedY,this.rotation+=this.rotationSpeed,this.size>.2&&(this.size-=.1)}draw(){if(o){o.save(),o.translate(this.x,this.y),o.rotate(this.rotation);const n=this.size/60;o.scale(n,n),o.translate(-75,-75),o.fillStyle=this.color,o.beginPath(),o.moveTo(75,40),o.bezierCurveTo(75,37,70,25,50,25),o.bezierCurveTo(20,25,20,62.5,20,62.5),o.bezierCurveTo(20,80,40,102,75,120),o.bezierCurveTo(110,102,130,80,130,62.5),o.bezierCurveTo(130,62.5,130,25,100,25),o.bezierCurveTo(85,25,75,37,75,40),o.fill(),o.restore()}}}function M(){for(let e=0;e<h.length;e++)h[e].update(),h[e].draw(),h[e].size<=.2&&(h.splice(e,1),e--)}const E=document.getElementById("falling-leaves-container");if(E)for(let n=0;n<50;n++){const t=document.createElement("div");t.classList.add("leaf"),t.style.left=`${Math.random()*100}vw`,t.style.animationDuration=`${Math.random()*8+7}s`,t.style.animationDelay=`-${Math.random()*10}s`,t.style.opacity=String(Math.random()*.6+.4);const i=Math.random()*10+5;t.style.width=`${i}px`,t.style.height=`${i}px`,t.style.backgroundColor=`hsl(330, 100%, ${Math.random()*15+75}%)`,E.appendChild(t)}function L(){o&&o.clearRect(0,0,f.width,f.height),M(),requestAnimationFrame(L)}L()});
